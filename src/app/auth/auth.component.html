<div class="ng-login-container">
  <mat-card class="ng-card">
    <mat-card-header>
      <mat-card-title>
        <ng-container *ngIf="isRegister">Register</ng-container>
        <ng-container *ngIf="isLogin">Login</ng-container>
        <ng-container *ngIf="isReset">Reset Password</ng-container>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <mat-form-field [color]="email?.valid && 'accent'" appearance="outline">
          <mat-icon matPrefix color="primary" class="ng-form-icon">email</mat-icon>
          <input matInput formControlName="email" type="email" placeholder="Email" autocomplete="off" />
          <mat-error *ngIf="email?.invalid">
            {{ emailError }}
          </mat-error>
        </mat-form-field>

        <mat-form-field [color]="email?.valid && 'accent'" *ngIf="!isReset" appearance="outline">
          <mat-icon matPrefix color="primary" class="ng-form-icon">lock</mat-icon>
          <mat-icon matSuffix color="primary" (click)="passhide = !passhide">{{passhide ? 'visibility_off' :
            'visibility'}}</mat-icon>
          <input matInput formControlName="password" type="password" placeholder="Password" autocomplete="off"
            [type]="passhide ? 'password' : 'text'" />
          <mat-error *ngIf="password?.invalid">
            {{ passError }}
          </mat-error>
        </mat-form-field>

        <mat-form-field [color]="confirmPassword?.valid && 'accent'" *ngIf="isRegister" appearance="outline">
          <mat-icon color="primary" matPrefix class="ng-form-icon">lock</mat-icon>
          <mat-icon color="primary" matSuffix (click)="confirmhide = !confirmhide">{{confirmhide ? 'visibility_off' :
            'visibility'}}
          </mat-icon>
          <input matInput formControlName="confirmPassword" type="password" placeholder="Confirm password"
            autocomplete="off" [type]="confirmhide ? 'password' : 'text'" />
          <mat-error *ngIf="confirmPassword?.invalid">
            {{ confirmError }}
          </mat-error>
        </mat-form-field>

        <mat-error *ngIf="serverMessage">
          <p>{{ serverMessage }}</p>
        </mat-error>

        <button mat-raised-button color="primary" type="submit" [disabled]="userForm.invalid || loading">
          <ng-container *ngIf="isReset">Send Reset Email</ng-container>
          <ng-container *ngIf="isLogin">Login</ng-container>
          <ng-container *ngIf="isRegister">Register</ng-container>
        </button>
      </form>
    </mat-card-content>
    <mat-card-footer class="ng-card-footer">
      <button mat-button color="primary" *ngIf="isLogin" routerLink="/reset">
        Forgot password?
      </button>
      <button mat-button color="primary" *ngIf="isReset || isRegister" routerLink="/login">
        Already registered?
      </button>
      <button mat-button color="primary" *ngIf="isLogin" routerLink="/register">
        Register
      </button>
    </mat-card-footer>
  </mat-card>
</div>
